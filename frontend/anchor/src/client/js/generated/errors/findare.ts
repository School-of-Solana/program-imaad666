/**
 * This code was AUTOGENERATED using the Codama library.
 * Please DO NOT EDIT THIS FILE, instead use visitors
 * to add features, then rerun Codama to update it.
 *
 * @see https://github.com/codama-idl/codama
 */

import {
  isProgramError,
  type Address,
  type SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM,
  type SolanaError,
} from 'gill';
import { FINDARE_PROGRAM_ADDRESS } from '../programs';

/** RewardTooSmall: Reward too small */
export const FINDARE_ERROR__REWARD_TOO_SMALL = 0x1770; // 6000
/** ClaimDepositTooSmall: Claim deposit too small */
export const FINDARE_ERROR__CLAIM_DEPOSIT_TOO_SMALL = 0x1771; // 6001
/** LostPostNotOpen: Lost post not open for this action */
export const FINDARE_ERROR__LOST_POST_NOT_OPEN = 0x1772; // 6002
/** Unauthorized: You are not authorized to perform this action */
export const FINDARE_ERROR__UNAUTHORIZED = 0x1773; // 6003
/** ReportAlreadyProcessed: Report already processed */
export const FINDARE_ERROR__REPORT_ALREADY_PROCESSED = 0x1774; // 6004
/** ClaimAlreadyProcessed: Claim already processed */
export const FINDARE_ERROR__CLAIM_ALREADY_PROCESSED = 0x1775; // 6005
/** ClaimNotAllowed: Claim not allowed in current state */
export const FINDARE_ERROR__CLAIM_NOT_ALLOWED = 0x1776; // 6006
/** EmptyField: Input field is empty */
export const FINDARE_ERROR__EMPTY_FIELD = 0x1777; // 6007
/** FieldTooLong: Input field exceeds allowed length */
export const FINDARE_ERROR__FIELD_TOO_LONG = 0x1778; // 6008
/** OutstandingReward: Outstanding reward remains in escrow */
export const FINDARE_ERROR__OUTSTANDING_REWARD = 0x1779; // 6009
/** InsufficientEscrow: Insufficient lamports in escrow account */
export const FINDARE_ERROR__INSUFFICIENT_ESCROW = 0x177a; // 6010

export type FindareError =
  | typeof FINDARE_ERROR__CLAIM_ALREADY_PROCESSED
  | typeof FINDARE_ERROR__CLAIM_DEPOSIT_TOO_SMALL
  | typeof FINDARE_ERROR__CLAIM_NOT_ALLOWED
  | typeof FINDARE_ERROR__EMPTY_FIELD
  | typeof FINDARE_ERROR__FIELD_TOO_LONG
  | typeof FINDARE_ERROR__INSUFFICIENT_ESCROW
  | typeof FINDARE_ERROR__LOST_POST_NOT_OPEN
  | typeof FINDARE_ERROR__OUTSTANDING_REWARD
  | typeof FINDARE_ERROR__REPORT_ALREADY_PROCESSED
  | typeof FINDARE_ERROR__REWARD_TOO_SMALL
  | typeof FINDARE_ERROR__UNAUTHORIZED;

let findareErrorMessages: Record<FindareError, string> | undefined;
if (process.env.NODE_ENV !== 'production') {
  findareErrorMessages = {
    [FINDARE_ERROR__CLAIM_ALREADY_PROCESSED]: `Claim already processed`,
    [FINDARE_ERROR__CLAIM_DEPOSIT_TOO_SMALL]: `Claim deposit too small`,
    [FINDARE_ERROR__CLAIM_NOT_ALLOWED]: `Claim not allowed in current state`,
    [FINDARE_ERROR__EMPTY_FIELD]: `Input field is empty`,
    [FINDARE_ERROR__FIELD_TOO_LONG]: `Input field exceeds allowed length`,
    [FINDARE_ERROR__INSUFFICIENT_ESCROW]: `Insufficient lamports in escrow account`,
    [FINDARE_ERROR__LOST_POST_NOT_OPEN]: `Lost post not open for this action`,
    [FINDARE_ERROR__OUTSTANDING_REWARD]: `Outstanding reward remains in escrow`,
    [FINDARE_ERROR__REPORT_ALREADY_PROCESSED]: `Report already processed`,
    [FINDARE_ERROR__REWARD_TOO_SMALL]: `Reward too small`,
    [FINDARE_ERROR__UNAUTHORIZED]: `You are not authorized to perform this action`,
  };
}

export function getFindareErrorMessage(code: FindareError): string {
  if (process.env.NODE_ENV !== 'production') {
    return (findareErrorMessages as Record<FindareError, string>)[code];
  }

  return 'Error message not available in production bundles.';
}

export function isFindareError<TProgramErrorCode extends FindareError>(
  error: unknown,
  transactionMessage: {
    instructions: Record<number, { programAddress: Address }>;
  },
  code?: TProgramErrorCode
): error is SolanaError<typeof SOLANA_ERROR__INSTRUCTION_ERROR__CUSTOM> &
  Readonly<{ context: Readonly<{ code: TProgramErrorCode }> }> {
  return isProgramError<TProgramErrorCode>(
    error,
    transactionMessage,
    FINDARE_PROGRAM_ADDRESS,
    code
  );
}
